<template name="admin_users">
	{{ setTitle "Utilisateurs" }}
	<div class="container">
        <div class="section">
            <div class="row">
            	<div class="col s12">
            		<h4>
            			<span class="col s2 m1">
        					<a href="{{pathFor route='admin.dashboard'}}" class="btn-flat waves-effect btn-floating dashboard-back">
        		            	<i class="material-icons grey-text text-darken-1">arrow_back</i>
	        		        </a>
        		        </span>
        		        <span class="col s10 m11">Utilisateurs</span>
    		        </h4>

    		        {{> delete_user_modal_admin }}

    		        <div class="row">
						<div class="col s11 offset-s1">

							<div class="input-field col s12 m5 right" id="search_user">
								{{> EasySearch.Input index=usersIndex}}
								<label class="label-icon" for="search"><i class="material-icons valign-wrapper">search</i></label>
							</div>
						</div>

					</div>
					<div class="row">
						<div class="col s11 offset-s1">
							<ul class="collapsible" data-collapsible="accordion">
								{{#EasySearch.Each index=usersIndex}}
									<li>
										<div class="collapsible-header">
											<i class="material-icons">people</i>{{ username }}
										</div>
										<div class="collapsible-body">
											<a href="#" class="delete_user_btn_admin btn-flat waves-effect btn-floating right">
												<i class="material-icons grey-text text-darken-1">delete</i>
											</a>
											<div class="row">
												<div class="col s12 m11 offset-m1">
													<div class="col s12 m12">
            		    							    <div class="col l3 s12" style='font-weight: bold;'>Compte créé le:</div>
    		   										     <div class="col l9 s11 offset-s1">{{ formatDate createdAt }}</div>
        									        </div>
													<div class="col s12 m12">
														<div class="col l3 s12" style='font-weight: bold;'>Rôle:</div>
													    <div class="col l9 s11 offset-s1">
													    	{{ roles.[0] }}
													    </div>
													</div>
													<div class="col s12 m12">
														<div class="col l3 s12" style='font-weight: bold;'>Email:</div>
													    <div class="col l9 s11 offset-s1">
													    	{{ emails.[0].address }}
													    	{{#if emails.[0].verified }}
    	        		            						    <i class="material-icons">verified_user</i>
        	    		    						        {{/if }}
													    </div>
    		    	    							</div>

													<div class="col s12 m12">
														<div class="col l3 s12" style='font-weight: bold;'>Prénom:</div>
														<div class="col l9 s11 offset-s1">{{ profile.firstName }}</div>
													</div>

													<div class="col s12 m12">
														<div class="col l3 s12" style='font-weight: bold;'>Nom:</div>
    													<div class="col l9 s11 offset-s1">{{ profile.lastName }}</div>
													</div>

													<div class="col s12 m12">
														<div class="col l3 s12" style='font-weight: bold;'>Date d'anniversaire:</div>
														<div class="col l9 s11 offset-s1">{{ profile.birthDate }}</div>
													</div>

													<div class="col s12 m12">
														<div class="col l3 s12" style='font-weight: bold;'>Sexe:</div>
														<div class="col l9 s11 offset-s1">
															{{#if compare profile.gender "H"}}
																Homme
															{{ else }}
																{{#if compare profile.gender "F"}}
																	Femme
																{{ else }}
																	Non définis/Autre
																{{/if}}
															{{/if}}
														</div>
													</div>
												</div>
											</div>
										</div>
									</li>
								{{/EasySearch.Each}}

								{{#EasySearch.IfNoResults index=usersIndex}}
									<li>
										<div class="collapsible-header no-results">
											<i class="material-icons">error</i>
											Aucun utilisateur trouvé
										</div>
									</li>
    							{{/EasySearch.IfNoResults}}
							</ul>

							{{#EasySearch.IfSearching index=usersIndex}}
								{{> loading }}
							{{/EasySearch.IfSearching}}
						</div>
					</div>
        		</div>
        	</div>
        </div>
    </div>
</template>

<template name="delete_user_modal_admin">
    <div id="delete_user_modal_admin" class="modal modal-fixed-footer">
        <div class="modal-content">
            <h5>Supprimer</h5>

            <div class="row">
                <div class="row col s12 offset-m1 m11">
                    <p>Êtes-vous {{#if compare user.profile.gender "F"}}sûre{{else}}sûr{{/if}} de vouloir supprimer le compte de {{ user }} ?</p>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a href="#" class="modal-action modal-close waves-effect waves-red btn-flat ">Non</a>
            <a href="#" id="apply_user_delete_admin" class="modal-action modal-close waves-effect waves-green btn-flat ">Oui</a>
        </div>
    </div>
</template>
